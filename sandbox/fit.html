<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <title>fit</title>

  <link rel="stylesheet" href="css/examples.css" />
  <style>
  .expanding-demo {
    width: 40%;
  }

  .expanding-demo .item {
    height: 40px;
    width: 25%;
  }

  .expanding-demo .item.is-expanded {
    height: 60px;
    width: 50%;
    background: #1D6;
  }

  .position-demo {
    width: 30%;
  }

  .position-demo .item {
    width: 60px;
    height: 60px;
  }
  </style>

</head>
<body>

<h1>fit</h1>

<h2>expand, shift</h2>

<div class="container expanding-demo shift">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div>

<h2>position, shift</h2>

<div class="container position-demo shift">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div>

<h2>expand, flow</h2>

<div class="container expanding-demo flow">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div>

<h2>position, flow</h2>

<div class="container position-demo flow">
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
  <div class="item"></div>
</div>

<script src="../bower_components/get-size/get-size.js"></script>
<script src="../bower_components/desandro-matches-selector/matches-selector.js"></script>
<script src="../bower_components/ev-emitter/ev-emitter.js"></script>
<script src="../bower_components/fizzy-ui-utils/utils.js"></script>
<script src="../bower_components/outlayer/item.js"></script>
<script src="../bower_components/outlayer/outlayer.js"></script>
<script src="../js/rect.js"></script>
<script src="../js/packer.js"></script>
<script src="../js/item.js"></script>
<script src="../js/packery.js"></script>

<script>


var expandShiftPckry = new Packery('.expanding-demo.shift');
var expandFlowPckry = new Packery( '.expanding-demo.flow', {
  packStyle: 'flow',
});
expandFit( expandShiftPckry )
expandFit( expandFlowPckry )

var positionShiftPckry = new Packery('.position-demo.shift');
var positionFlowPckry = new Packery( '.position-demo.flow', {
  packStyle: 'flow',
});
positionFit( positionShiftPckry )
positionFit( positionFlowPckry )


function addEventSelect( element, eventName, selector, listener ) {
  element.addEventListener( eventName, function( event ) {
    if ( matchesSelector( event.target, selector ) ) {
      listener( event );
    }
  });
}

function expandFit( pckry ) {
  addEventSelect( pckry.element, 'click', '.item', function( event ) {
    var target = event.target;
    var isExpanded = target.classList.contains('is-expanded');
    target.classList.toggle('is-expanded');

    if ( isExpanded ) {
      // if shrinking, just layout
      pckry.shiftLayout();
    } else {
      // if expanding, fit it
      pckry.fit( target );
    }
  });
}

function positionFit( pckry ) {
  addEventSelect( pckry.element, 'click', '.item', function( event ){
    pckry.fit( event.target, 40, 40 );
  });
}

</script>

</body>
</html>
